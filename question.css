/* ============================================================================
   QUESTION PAGE - Quiz/Question-specific Styles
   ============================================================================ */

/* CALLED BY: question.html - <div id="questionSection" class="question-container">, question.js - displayQuestion() (scrolls container on mobile) */
.question-container {
    margin-top: 20px;
}

/* CALLED BY: question.html - <div class="question-block"> */
.question-block {
    background: white;
    border: 2px solid #ddd;
    border-radius: 10px;
    padding: 30px;
    margin-bottom: 20px;
    text-align: center;
}

/* CALLED BY: question.html - <div class="question-line" id="line1">, <div class="question-line" id="line2">, question.js - displayQuestion() (sets textContent, adds/removes 'hidden' class) */
.question-line {
    font-size: 24px;
    margin: 10px 0;
    font-weight: 500;
    color: #333;
}

/* CALLED BY: question.js - displayQuestion() (adds 'mobile-question' class for multi-digit variants) */
.question-line.mobile-question {
    text-align: right;
    font-size: 28px;
    letter-spacing: 4mm; /* 4mm spacing between digits for all lines */
    padding-right: 20px;
    font-family: 'Courier New', monospace; /* Monospace font for better digit alignment */
}

/* CALLED BY: question.html - <div class="math-divider" id="mathDivider">, question.js - displayQuestion() (shows for multi-digit variants) */
.math-divider {
    border-top: 2px solid #333;
    margin: 10px 0;
    padding-right: 20px;
    text-align: right;
    min-height: 2px;
    display: none; /* Hidden by default */
}

.math-divider:not(.hidden) {
    display: block;
}

/* CALLED BY: question.html - <div class="question-line correct-answer-line hidden" id="correctAnswerLine">, question.js - checkAnswer() (shows correct answer for multi-digit variants) */
.correct-answer-line {
    text-align: right;
    font-size: 28px;
    letter-spacing: 4mm; /* 4mm spacing to match question lines */
    padding-right: 20px;
    font-family: 'Courier New', monospace;
    color: #d32f2f; /* Red color for wrong answer */
    margin-top: 10px;
}

/* CALLED BY: question.html - <div id="answerCellsContainer" class="answer-cells-container">, question.js - setupRightToLeftInput() (creates digit cells) */
.answer-cells-container {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
    padding-right: 20px;
    font-family: 'Courier New', monospace;
    font-size: 28px;
    margin: 15px 0;
}

/* CALLED BY: question.js - setupRightToLeftInput() (creates simple input field for multi-digit answers) */
.multidigit-answer-input {
    display: inline-block;
    text-align: right;
    font-size: inherit; /* Inherit from parent .mobile-question */
    font-family: inherit; /* Inherit from parent .mobile-question */
    letter-spacing: inherit; /* Inherit from parent .mobile-question */
    width: 100%;
    padding: 0;
    margin: 0;
    border: none;
    border-radius: 0;
    background: transparent;
    outline: none;
    color: inherit; /* Inherit from parent */
    font-weight: inherit; /* Inherit from parent */
    box-sizing: border-box;
    caret-color: #667eea; /* Blinking cursor color */
}

/* CALLED BY: question.js - displayQuestion() and setupRightToLeftInput() (for division - uniform 5-character text fields) */
.division-field {
    text-align: left; /* Left-aligned for all division fields */
    width: 5ch; /* Fixed 5-character width */
    font-family: 'Courier New', monospace; /* Monospace font for consistent character width */
    font-size: 28px; /* Match current font size */
    letter-spacing: 6mm; /* Increased spacing between digits for division (more than 4mm used in multiplication) */
    display: block; /* Block display to ensure lines stack vertically */
    padding: 0;
    margin: 10px 0; /* Vertical spacing between lines (matches .question-line) */
    border: none;
    border-radius: 0;
    background: transparent;
    outline: none;
    color: #333;
    font-weight: 500;
    box-sizing: border-box;
}

/* CALLED BY: question.js - displayQuestion() (for division line2 - divisor line needs more width) */
.division-field.divisor-line {
    width: auto; /* Allow wider width for divisor line (has spaces + symbol + number) */
    min-width: 5ch; /* Minimum width to match other lines */
}

/* CALLED BY: question.js - setupRightToLeftInput() (for division - 5-digit field with left-to-right input) */
.multidigit-answer-input.division-answer-input {
    text-align: left; /* Left-to-right input for division */
    width: calc(5ch + 4 * 6mm); /* 5 characters + 4 letter-spacings (6mm each) */
    font-family: 'Courier New', monospace; /* Match dividend font */
    font-size: 28px; /* Match dividend font size */
    letter-spacing: 6mm; /* Match spacing in .division-field */
    display: inline-block; /* Allow positioning */
    padding: 0;
    margin: 0;
    border: none;
    border-radius: 0;
    background: transparent;
    outline: none;
    box-sizing: border-box;
    caret-color: #667eea; /* Blinking cursor color */
}

/* CALLED BY: question.js - setupRightToLeftInput() (creates individual answer cells) */
.answer-cell {
    width: auto;
    min-width: 30px;
    height: auto;
    border: none;
    border-radius: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    font-size: 28px;
    font-weight: 500;
    color: #333;
    box-sizing: border-box;
    padding: 0 4px;
}

.answer-cell.filled {
    background: transparent;
}

.answer-cell.active {
    background: transparent;
}

/* Show blinking cursor in active empty cell */
.answer-cell.active:empty::after {
    content: '|';
    color: #667eea;
    animation: blink 1s infinite;
    font-weight: bold;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* CALLED BY: question.html - <input type="number" id="answerInput" class="answer-input">, question.js - setupNormalInput() (shows input, adds event listeners), setupRightToLeftInput() (hides input) */
.answer-input {
    font-size: 24px;
    padding: 10px;
    border: 2px solid #667eea;
    border-radius: 8px;
    text-align: center;
    width: 100px;
    margin: 0 10px;
}

/* CALLED BY: question.html - focus state on .answer-input */
.answer-input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* CALLED BY: question.html - <div id="answerDisplay" class="answer-display hidden">, question.js - setupNormalInput() (hides answerDisplay), setupRightToLeftInput() (hides answerDisplay) */
.answer-display {
    display: inline-block;
    font-size: 24px;
    padding: 10px;
    border: 2px solid #667eea;
    border-radius: 8px;
    min-width: 100px;
    margin: 0 10px;
    background: #f8f9fa;
}

/* CALLED BY: question.html - <input type="text" id="hiddenInput" class="hidden-input"> */
.hidden-input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

/* CALLED BY: question.html - <input type="tel" id="mobileAnswerInput" class="mobile-answer-input">, question.js - setupRightToLeftInput() (shows on mobile) */
.mobile-answer-input {
    display: block;
    width: 100%;
    max-width: 400px;
    margin: 20px auto;
    padding: 15px;
    font-size: 28px;
    text-align: center;
    border: 3px solid #667eea;
    border-radius: 10px;
    background: #f0f4ff;
    outline: none;
    box-sizing: border-box;
}

.mobile-answer-input:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
    background: #ffffff;
}

/* Hide on desktop */
@media (min-width: 769px) {
    .mobile-answer-input {
        display: none !important;
    }
}

/* CALLED BY: question.html - <table id="multidigitTable" class="multidigit-table hidden">, question.js - setupRightToLeftInput() (creates table structure, removes 'hidden' class), setupNormalInput() (adds 'hidden' class) */
.multidigit-table {
    margin: 20px auto;
    border-collapse: collapse;
    width: auto;
}

/* CALLED BY: question.js - setupRightToLeftInput() (creates <td> elements in table) */
.multidigit-table td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
    min-width: 50px;
    font-size: 20px;
    min-height: 44px; /* keep all rows tall enough even when empty */
    height: 44px;
    vertical-align: middle;
}

/* Add a thick dividing line after the second row */
.multidigit-table tr:nth-child(2) td {
    border-bottom: 3px solid #667eea;
}

/* CALLED BY: question.js - setupRightToLeftInput() (adds 'answer-cell' class to answer input cells) */
.multidigit-table td.answer-cell {
    background: #f0f4ff;
    border-color: #667eea;
}

/* CALLED BY: question.js - setupRightToLeftInput() (creates <input> elements inside .answer-cell) */
.multidigit-table td.answer-cell input {
    border: none;
    background: transparent;
    text-align: center;
    font-size: 20px;
    width: 100%;
    outline: none;
    height: 100%;
    line-height: 1.2;
}

/* CALLED BY: question.html - <div class="timer hidden" id="timer">, question.js - startTimer() (adds 'hidden' class, sets display: none) */
.timer {
    text-align: right;
    font-size: 16px;
    color: #666;
    margin-bottom: 20px;
}

/* CALLED BY: question.html - <div class="correct-answer" id="line4">, question.js - checkAnswer() (sets textContent to show correct answer when wrong) */
.correct-answer {
    font-size: 18px;
    color: #28a745;
    margin-top: 15px;
    font-weight: 500;
}

/* CALLED BY: question.html - <div class="dashboard-buttons-grid"> */
.dashboard-buttons-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 8px;
    margin-top: 15px;
    margin-bottom: 20px;
    max-width: 256px; /* Allows 2 buttons side by side: 120px + 8px + 120px + padding = ~256px */
    margin-left: auto;
    margin-right: auto;
}

/* CALLED BY: question.html - <button class="btn btn-auth"> inside .dashboard-buttons-grid */
.dashboard-buttons-grid .btn-auth {
    padding: 6px 12px;
    font-size: 13px;
    width: 100%;
}

/* CALLED BY: question.html - <div class="quiz-controls hidden" id="quizControls">, question.js - displayQuestion() (removes 'hidden' class for multi-digit variants, adds 'hidden' class for standard variants), startSession() (adds 'hidden' class initially) */
.quiz-controls {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 8px;
    margin-top: 20px;
    max-width: 256px;
    margin-left: auto;
    margin-right: auto;
}

/* CALLED BY: question.html - <button class="btn btn-quiz" id="onHoldBtn">, <button class="btn btn-quiz" id="tryAgainBtn">, <button class="btn btn-quiz" id="nextQuestionBtn">, <button class="btn btn-quiz" id="nextAssignmentBtn"> */
.quiz-controls .btn-quiz {
    padding: 6px 12px;
    font-size: 13px;
    width: 100%;
}

/* CALLED BY: question.html - <div class="progress-tracker">, question.js - updateProgressTracker() (updates progress text and bar) */
.progress-tracker {
    margin-bottom: 20px;
    text-align: center;
}

/* CALLED BY: question.html - <div class="progress-text" id="progressText">, question.js - updateProgressTracker() (sets textContent) */
.progress-text {
    font-size: 16px;
    font-weight: 600;
    color: #667eea;
    margin-bottom: 8px;
}

/* CALLED BY: question.html - <div class="progress-bar-container"> */
.progress-bar-container {
    width: 100%;
    height: 8px;
    background-color: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
}

/* CALLED BY: question.html - <div class="progress-bar" id="progressBar">, question.js - updateProgressTracker() (sets width style) */
.progress-bar {
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 4px;
    transition: width 0.3s ease;
    width: 0%;
}

/* CALLED BY: question.html - class="hidden" on timer, answerDisplay, multidigitTable, quizControls, question.js - displayQuestion() (adds/removes 'hidden' class on line1, line2, quizControls), setupNormalInput() (adds 'hidden' class to answerDisplay, multidigitTable), setupRightToLeftInput() (adds 'hidden' class to input, answerDisplay, removes from multidigitTable), startTimer() (adds 'hidden' class to timer), startSession() (adds 'hidden' class to quizControls). Note: Uses !important to override any conflicting styles on question page. */
.hidden {
    display: none !important;
    visibility: hidden;
}
