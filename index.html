<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#156082">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Maths App">
    <title>Learning Maths in Baby Steps</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    <link rel="stylesheet" href="shared.css">
    <link rel="stylesheet" href="index.css">
    <script src="shared.js"></script>
    <script src="shared_db.js"></script>
    <script src="index.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }

        // Handle PWA install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            console.log('PWA install prompt available');
            // You can show a custom install button here if needed
        });

        // Track if app is installed
        window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            deferredPrompt = null;
        });
    </script>
</head>
<body>
    <div class="container">
        <!-- Registration Page -->
        <div id="registrationPage" class="registration-page">
            <h1 class="page-title">Learning Maths in Baby Steps</h1>
            
            <div class="auth-buttons-grid">
                <button class="btn btn-auth" onclick="toggleWelcome()">Welcome</button>
                <button class="btn btn-auth" onclick="showAnonymousUser()">Anonymous User</button>
                <button class="btn btn-auth" onclick="showRegistration()">Registration</button>
                <div class="auth-combined">
                    <button class="btn btn-auth" onclick="showLogin()" id="loginBtnTop">Login</button>
                    <button class="btn btn-auth hidden" onclick="handleLogout()" id="logoutBtnTop">Logout</button>
                </div>
                <button class="btn btn-auth" onclick="showForgotPassword()">Forgot Password</button>
            </div>
            
            <!-- Teaching Method Information -->
            <div class="teaching-method-info hidden" id="welcomeContent">
                <div class="welcome-text">
                    <p>Welcome to this new method of teaching children the fundamentals of arithmetic. The object of this method is to make children fluent in</p>
                </div>
                
                <div class="operations-row">
                    <div class="operation-box">Single-digit Addition</div>
                    <div class="operation-box">Single-digit Subtraction</div>
                    <div class="operation-box">Single-digit Multiplication</div>
                    <div class="operation-box">Single-digit Division</div>
                </div>
                
                <div class="pedagogical-text">
                    <p>The emphasis is on practice and perfection. Both speed and accuracy are important. Each child learns at her own pace and the progress of each child is tracked. Apart from single digit operations, children also learn the art of mental calculation in</p>
                </div>
                
                <div class="operations-row">
                    <div class="operation-box">Multi-digit Addition</div>
                    <div class="operation-box">Multi-digit Subtraction</div>
                    <div class="operation-box">Multi-digit Multiplication by 1-digit</div>
                    <div class="operation-box">Multi-digit<br>Division<br>by 1-digit</div>
                </div>
                
                <div class="techniques-list">
                    <ul>
                        <li>Multi-digit Addition and multiplication are done without writing carry.</li>
                        <li>Multi-digit subtraction is done without writing borrowing.</li>
                        <li>Multi-digit division is done without writing remainder.</li>
                    </ul>
                </div>
                
                <div class="progression-arrow">
                    <div class="math-box math-box-left">I hate Maths</div>
                    <div class="arrow-container">
                        <svg width="60" height="40" viewBox="0 0 60 40" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 5 15 L 45 15 L 45 8 L 55 20 L 45 32 L 45 25 L 5 25 Z" fill="#156082"/>
                        </svg>
                    </div>
                    <div class="math-box math-box-right">I love Maths</div>
                </div>
                
                <div class="contact-info">
                    <span class="contact-name">Prem Agrawal</span>
                    <a href="mailto:agrawal.prem@gmail.com" class="contact-email">agrawal.prem@gmail.com</a>
                    <span class="contact-phone">+91 9822847682</span>
                </div>
            </div>
            
            <div id="authContentArea" class="auth-content-area">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>
</body>
</html>
